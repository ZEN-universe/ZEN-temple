import{s as Be,r as j,e as u,a as R,c,m as re,g as Y,b as I,f as _,o as p,i as de,h as d,v as W,w as Ae,x as Se}from"../chunks/scheduler.CM3yWj5-.js";import{S as Fe,i as Ke,b as P,c as be,d as he,m as ve,t as Q,a as ne,e as Le,f as me,g as $e}from"../chunks/index.Ben0jr7p.js";import{S as Ne,B as Re,g as Ye,a as Ze,f as Ge}from"../chunks/utils.CB6KrYor.js";import{D as Ce}from"../chunks/Dropdown.7e0V7e_D.js";import{g as ae}from"../chunks/variables.CqS7hfz2.js";function ze(e){let a,o,D='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Data selection</button>',l,w,m,k,g,i,V="Year",H,h,S,C,Z,q,L,A,$="Node",se,T,F,z,ee,K,G,te,_e="Carrier",fe,O,J,v,E,f,t,b,s="Smoothing Window Size",U,y,X,oe,x;function le(n){e[21](n)}function B(n){e[22](n)}let pe={enabled:!e[3]&&!e[2]};e[8]!==void 0&&(pe.options=e[8]),e[9]!==void 0&&(pe.selected_option=e[9]),h=new Ce({props:pe}),j.push(()=>P(h,"options",le)),j.push(()=>P(h,"selected_option",B)),h.$on("selection-changed",e[15]);function Ee(n){e[23](n)}function we(n){e[24](n)}let r={enabled:!e[3]&&!e[2]};e[4]!==void 0&&(r.options=e[4]),e[5]!==void 0&&(r.selected_option=e[5]),T=new Ce({props:r}),j.push(()=>P(T,"options",Ee)),j.push(()=>P(T,"selected_option",we)),T.$on("selection-changed",e[15]);function ge(n){e[25](n)}function We(n){e[26](n)}let Ie={enabled:!e[3]&&!e[2]};e[6]!==void 0&&(Ie.options=e[6]),e[7]!==void 0&&(Ie.selected_option=e[7]),O=new Ce({props:Ie}),j.push(()=>P(O,"options",ge)),j.push(()=>P(O,"selected_option",We)),O.$on("selection-changed",e[15]);function Pe(n){e[27](n)}function qe(n){e[28](n)}let Ve={enabled:!e[3]&&!e[2]};return e[11]!==void 0&&(Ve.options=e[11]),e[12]!==void 0&&(Ve.selected_option=e[12]),y=new Ce({props:Ve}),j.push(()=>P(y,"options",Pe)),j.push(()=>P(y,"selected_option",qe)),y.$on("selection-changed",e[15]),{c(){a=u("div"),o=u("h2"),o.innerHTML=D,l=R(),w=u("div"),m=u("div"),k=u("div"),g=u("div"),i=u("h3"),i.textContent=V,H=R(),be(h.$$.fragment),Z=R(),q=u("div"),L=u("div"),A=u("h3"),A.textContent=$,se=R(),be(T.$$.fragment),ee=R(),K=u("div"),G=u("div"),te=u("h3"),te.textContent=_e,fe=R(),be(O.$$.fragment),E=R(),f=u("div"),t=u("div"),b=u("h3"),b.textContent=s,U=R(),be(y.$$.fragment),this.h()},l(n){a=c(n,"DIV",{class:!0});var M=I(a);o=c(M,"H2",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-1rnon8p"&&(o.innerHTML=D),l=Y(M),w=c(M,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var ue=I(w);m=c(ue,"DIV",{class:!0});var N=I(m);k=c(N,"DIV",{class:!0});var ce=I(k);g=c(ce,"DIV",{class:!0});var ie=I(g);i=c(ie,"H3",{"data-svelte-h":!0}),re(i)!=="svelte-r9e7qt"&&(i.textContent=V),H=Y(ie),he(h.$$.fragment,ie),ie.forEach(_),ce.forEach(_),Z=Y(N),q=c(N,"DIV",{class:!0});var He=I(q);L=c(He,"DIV",{class:!0});var ke=I(L);A=c(ke,"H3",{"data-svelte-h":!0}),re(A)!=="svelte-ocjo5w"&&(A.textContent=$),se=Y(ke),he(T.$$.fragment,ke),ke.forEach(_),He.forEach(_),ee=Y(N),K=c(N,"DIV",{class:!0});var Te=I(K);G=c(Te,"DIV",{class:!0});var ye=I(G);te=c(ye,"H3",{"data-svelte-h":!0}),re(te)!=="svelte-xc22hm"&&(te.textContent=_e),fe=Y(ye),he(O.$$.fragment,ye),ye.forEach(_),Te.forEach(_),E=Y(N),f=c(N,"DIV",{class:!0});var Me=I(f);t=c(Me,"DIV",{class:!0});var De=I(t);b=c(De,"H3",{"data-svelte-h":!0}),re(b)!=="svelte-ec8yqb"&&(b.textContent=s),U=Y(De),he(y.$$.fragment,De),De.forEach(_),Me.forEach(_),N.forEach(_),ue.forEach(_),M.forEach(_),this.h()},h(){p(o,"class","accordion-header"),p(g,"class","col-6"),p(k,"class","row"),p(L,"class","col-6"),p(q,"class","row"),p(G,"class","col-6"),p(K,"class","row"),p(t,"class","col-6"),p(f,"class","row"),p(m,"class","accordion-body"),p(w,"id","collapseTwo"),p(w,"class","accordion-collapse collapse"),p(w,"data-bs-parent","#accordionExample"),p(a,"class","accordion-item")},m(n,M){de(n,a,M),d(a,o),d(a,l),d(a,w),d(w,m),d(m,k),d(k,g),d(g,i),d(g,H),ve(h,g,null),d(m,Z),d(m,q),d(q,L),d(L,A),d(L,se),ve(T,L,null),d(m,ee),d(m,K),d(K,G),d(G,te),d(G,fe),ve(O,G,null),d(m,E),d(m,f),d(f,t),d(t,b),d(t,U),ve(y,t,null),x=!0},p(n,M){const ue={};M[0]&12&&(ue.enabled=!n[3]&&!n[2]),!S&&M[0]&256&&(S=!0,ue.options=n[8],W(()=>S=!1)),!C&&M[0]&512&&(C=!0,ue.selected_option=n[9],W(()=>C=!1)),h.$set(ue);const N={};M[0]&12&&(N.enabled=!n[3]&&!n[2]),!F&&M[0]&16&&(F=!0,N.options=n[4],W(()=>F=!1)),!z&&M[0]&32&&(z=!0,N.selected_option=n[5],W(()=>z=!1)),T.$set(N);const ce={};M[0]&12&&(ce.enabled=!n[3]&&!n[2]),!J&&M[0]&64&&(J=!0,ce.options=n[6],W(()=>J=!1)),!v&&M[0]&128&&(v=!0,ce.selected_option=n[7],W(()=>v=!1)),O.$set(ce);const ie={};M[0]&12&&(ie.enabled=!n[3]&&!n[2]),!X&&M[0]&2048&&(X=!0,ie.options=n[11],W(()=>X=!1)),!oe&&M[0]&4096&&(oe=!0,ie.selected_option=n[12],W(()=>oe=!1)),y.$set(ie)},i(n){x||(Q(h.$$.fragment,n),Q(T.$$.fragment,n),Q(O.$$.fragment,n),Q(y.$$.fragment,n),x=!0)},o(n){ne(h.$$.fragment,n),ne(T.$$.fragment,n),ne(O.$$.fragment,n),ne(y.$$.fragment,n),x=!1},d(n){n&&_(a),me(h),me(T),me(O),me(y)}}}function Oe(e){let a,o='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){a=u("div"),a.innerHTML=o,this.h()},l(D){a=c(D,"DIV",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-57s7b4"&&(a.innerHTML=o),this.h()},h(){p(a,"class","text-center")},m(D,l){de(D,a,l)},d(D){D&&_(a)}}}function je(e){let a,o,D,l,w;function m(i){e[29](i)}function k(i){e[30](i)}let g={zoom:!0};return e[13]!==void 0&&(g.config=e[13]),e[10]!==void 0&&(g.plot_name=e[10]),o=new Re({props:g}),j.push(()=>P(o,"config",m)),j.push(()=>P(o,"plot_name",k)),{c(){a=u("div"),be(o.$$.fragment),this.h()},l(i){a=c(i,"DIV",{style:!0});var V=I(a);he(o.$$.fragment,V),V.forEach(_),this.h()},h(){Ae(a,"position","relative")},m(i,V){de(i,a,V),ve(o,a,null),w=!0},p(i,V){const H={};!D&&V[0]&8192&&(D=!0,H.config=i[13],W(()=>D=!1)),!l&&V[0]&1024&&(l=!0,H.plot_name=i[10],W(()=>l=!1)),o.$set(H)},i(i){w||(Q(o.$$.fragment,i),w=!0)},o(i){ne(o.$$.fragment,i),w=!1},d(i){i&&_(a),me(o)}}}function Je(e){let a,o='<div class="col"><h2>The Energy Balance</h2></div>',D,l,w,m,k,g,i,V='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',H,h,S,C,Z,q,L,A,$,se,T,F,z,ee,K;function G(t){e[16](t)}function te(t){e[17](t)}function _e(t){e[18](t)}function fe(t){e[19](t)}function O(t){e[20](t)}let J={enabled:!e[2]&&!e[3]};e[6]!==void 0&&(J.carriers=e[6]),e[4]!==void 0&&(J.nodes=e[4]),e[8]!==void 0&&(J.years=e[8]),e[0]!==void 0&&(J.selected_solution=e[0]),e[2]!==void 0&&(J.loading=e[2]),C=new Ne({props:J}),j.push(()=>P(C,"carriers",G)),j.push(()=>P(C,"nodes",te)),j.push(()=>P(C,"years",_e)),j.push(()=>P(C,"selected_solution",fe)),j.push(()=>P(C,"loading",O)),C.$on("solution_selected",e[14]);let v=!e[2]&&e[0]&&ze(e),E=e[3]&&Oe(),f=!e[3]&&e[1]&&je(e);return{c(){a=u("div"),a.innerHTML=o,D=R(),l=u("div"),w=u("div"),m=u("div"),k=u("div"),g=u("div"),i=u("h2"),i.innerHTML=V,H=R(),h=u("div"),S=u("div"),be(C.$$.fragment),se=R(),v&&v.c(),T=R(),F=u("div"),z=u("div"),E&&E.c(),ee=R(),f&&f.c(),this.h()},l(t){a=c(t,"DIV",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-1d6fcfp"&&(a.innerHTML=o),D=Y(t),l=c(t,"DIV",{class:!0});var b=I(l);w=c(b,"DIV",{class:!0});var s=I(w);m=c(s,"DIV",{class:!0});var U=I(m);k=c(U,"DIV",{class:!0,id:!0});var y=I(k);g=c(y,"DIV",{class:!0});var X=I(g);i=c(X,"H2",{class:!0,"data-svelte-h":!0}),re(i)!=="svelte-1oln34a"&&(i.innerHTML=V),H=Y(X),h=c(X,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var oe=I(h);S=c(oe,"DIV",{class:!0});var x=I(S);he(C.$$.fragment,x),x.forEach(_),oe.forEach(_),X.forEach(_),se=Y(y),v&&v.l(y),y.forEach(_),U.forEach(_),s.forEach(_),b.forEach(_),T=Y(t),F=c(t,"DIV",{class:!0});var le=I(F);z=c(le,"DIV",{class:!0});var B=I(z);E&&E.l(B),ee=Y(B),f&&f.l(B),B.forEach(_),le.forEach(_),this.h()},h(){p(a,"class","row"),p(i,"class","accordion-header"),p(S,"class","accordion-body"),p(h,"id","collapseOne"),p(h,"class","accordion-collapse collapse show"),p(h,"data-bs-parent","#accordionExample"),p(g,"class","accordion-item solution-selection"),p(k,"class","accordion"),p(k,"id","accordionExample"),p(m,"class","filters"),p(w,"class","col position-relative"),p(l,"class","row"),p(z,"class","col mt-4"),p(F,"class","row")},m(t,b){de(t,a,b),de(t,D,b),de(t,l,b),d(l,w),d(w,m),d(m,k),d(k,g),d(g,i),d(g,H),d(g,h),d(h,S),ve(C,S,null),d(k,se),v&&v.m(k,null),de(t,T,b),de(t,F,b),d(F,z),E&&E.m(z,null),d(z,ee),f&&f.m(z,null),K=!0},p(t,b){const s={};b[0]&12&&(s.enabled=!t[2]&&!t[3]),!Z&&b[0]&64&&(Z=!0,s.carriers=t[6],W(()=>Z=!1)),!q&&b[0]&16&&(q=!0,s.nodes=t[4],W(()=>q=!1)),!L&&b[0]&256&&(L=!0,s.years=t[8],W(()=>L=!1)),!A&&b[0]&1&&(A=!0,s.selected_solution=t[0],W(()=>A=!1)),!$&&b[0]&4&&($=!0,s.loading=t[2],W(()=>$=!1)),C.$set(s),!t[2]&&t[0]?v?(v.p(t,b),b[0]&5&&Q(v,1)):(v=ze(t),v.c(),Q(v,1),v.m(k,null)):v&&($e(),ne(v,1,1,()=>{v=null}),Le()),t[3]?E||(E=Oe(),E.c(),E.m(z,ee)):E&&(E.d(1),E=null),!t[3]&&t[1]?f?(f.p(t,b),b[0]&10&&Q(f,1)):(f=je(t),f.c(),Q(f,1),f.m(z,null)):f&&($e(),ne(f,1,1,()=>{f=null}),Le())},i(t){K||(Q(C.$$.fragment,t),Q(v),Q(f),K=!0)},o(t){ne(C.$$.fragment,t),ne(v),ne(f),K=!1},d(t){t&&(_(a),_(D),_(l),_(T),_(F)),me(C),v&&v.d(),E&&E.d(),f&&f.d()}}}function Qe(e,a,o){var D=["rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 99, 132)","rgb(201, 203, 207)","rgb(220,20,60)","rgb(255,99,71)","rgb(255,69,0)","rgb(154,205,50)","rgb(0,100,0)","rgb(50,205,50)","rgb(0,139,139)","rgb(153,50,204)","rgb(255,105,180)"];let l=null,w=!1,m=!1,k=!1,g=[],i=null,V=[],H=null,h=[],S=null,C="",Z="",q=["Hourly","Daily","Weekly","Monthly"],L="Hourly";const A={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};let $=structuredClone(A);async function se(){l&&(o(13,$=structuredClone(A)),o(5,i=g[0]),o(7,H=V[0]),o(9,S=h[0]),o(1,w=!1),await T())}async function T(){if(o(3,k=!0),Se(),i==null||H==null||S==null||l==null){o(3,k=!1);return}let s=Math.floor((S-l.detail.system.reference_year)/l.detail.system.interval_between_years),U=1;switch(L){case"Daily":U=24;break;case"Weekly":U=168;break;case"Monthly":U=720;break}let y=await Ye(l.solution_name,i,H,l.scenario_name,s,U),X=await Ze(l.solution_name,ae("flow_export",l.version),l.scenario_name);X===null?C="":C=X.data[0][0];let oe=[],x=0;for(const B in y){let pe={node:[i]};if(y[B]==null||y[B].data.length==0)continue;if("technology"in y[B].data[0]){let r=[];for(const ge of y[B].data)r.push(ge.technology);pe={technology:r}}let Ee={},we=Ge(y[B].data,pe,Ee);if(we.length!=0)for(let r of we){if(Object.keys(r.data).length==0)continue;switch(B){case ae("flow_storage_discharge",l.version):r.label=r.label+" (discharge)";break;case ae("flow_transport_in",l.version):r.label=r.label+" (transport in)";break;case ae("flow_import",l.version):r.label="Import",l.version;break;case ae("shed_demand",l.version):r.label="Shed Demand";break;case ae("flow_storage_charge",l.version):r.label=r.label+" (charge)";break;case ae("flow_transport_out",l.version):r.label=r.label+" (transport out)";break;case ae("flow_export",l.version):r.label="Export";break}let ge="line";Object.keys(r.data).length==1&&(ge="bar"),B=="demand"?(r.label="Demand",r.type="line",r.stack="ownCustomStack",r.fill=!1,r.borderColor="black",r.backgroundColor="white",r.borderWidth=2,r.stepped=!0,Object.keys(r.data).length==1&&(r.pointRadius=2)):(r.type=ge,r.fill="origin",r.borderColor=D[x%D.length],r.backgroundColor=D[x%D.length].replace(")",", 1)"),r.stepped=!0,r.cubicInterpolationMode="monotone"),oe.push(r),x++}}o(13,$.data.labels=Object.keys(oe[0].data),$),o(13,$.data.datasets=oe,$),o(13,$.options.scales.y.title.text="Power ["+C+"]",$),o(3,k=!1),o(1,w=!0),await Se();let le=l.solution_name.split(".");o(10,Z=[le[(le==null?void 0:le.length)-1],l==null?void 0:l.scenario_name,"balance",H,i,S].join("_"))}function F(s){V=s,o(6,V)}function z(s){g=s,o(4,g)}function ee(s){h=s,o(8,h)}function K(s){l=s,o(0,l)}function G(s){m=s,o(2,m)}function te(s){h=s,o(8,h)}function _e(s){S=s,o(9,S)}function fe(s){g=s,o(4,g)}function O(s){i=s,o(5,i)}function J(s){V=s,o(6,V)}function v(s){H=s,o(7,H)}function E(s){q=s,o(11,q)}function f(s){L=s,o(12,L)}function t(s){$=s,o(13,$)}function b(s){Z=s,o(10,Z)}return[l,w,m,k,g,i,V,H,h,S,Z,q,L,$,se,T,F,z,ee,K,G,te,_e,fe,O,J,v,E,f,t,b]}class ot extends Fe{constructor(a){super(),Ke(this,a,Qe,Je,Be,{},null,[-1,-1])}}export{ot as component};
