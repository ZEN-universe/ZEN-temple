import{s as je,e as b,c as v,b as V,f as g,y as Be,o as m,i as U,h as p,z as ke,A as Ee,n as ye,B as qe,C as Ae,G as Fe,t as Ne,a as K,d as We,g as R,D as De,j as Ge,E as Ke,r as B,m as ae,v as be,w as q,F as Ce}from"../chunks/scheduler.BVk0_e6s.js";import{S as ze,i as Pe,b as A,c as ce,d as ue,m as fe,t as Z,a as ne,e as Ie,f as _e,g as Ve}from"../chunks/index.B3JOrRZV.js";import{S as Re,B as Ye,b as Ze,c as Je,f as Qe}from"../chunks/utils.CrACOxzk.js";import{e as Te}from"../chunks/each.D6YF6ztN.js";import{g as oe}from"../chunks/variables.CqS7hfz2.js";function He(e,o,t){const f=e.slice();return f[8]=o[t],f}function Le(e){let o,t=e[8]+"",f,l,_;return{c(){o=b("option"),f=Ne(t),l=K(),this.h()},l(u){o=v(u,"OPTION",{});var s=V(o);f=We(s,t),l=R(s),s.forEach(g),this.h()},h(){o.__value=_=e[8],De(o,o.__value)},m(u,s){U(u,o,s),p(o,f),p(o,l)},p(u,s){s&2&&t!==(t=u[8]+"")&&Ge(f,t),s&2&&_!==(_=u[8])&&(o.__value=_,De(o,o.__value))},d(u){u&&g(o)}}}function Ue(e){let o,t,f,l,_,u=Te(e[1]),s=[];for(let a=0;a<u.length;a+=1)s[a]=Le(He(e,u,a));return{c(){o=b("div"),t=b("select");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){o=v(a,"DIV",{class:!0});var i=V(o);t=v(i,"SELECT",{});var d=V(t);for(let E=0;E<s.length;E+=1)s[E].l(d);d.forEach(g),i.forEach(g),this.h()},h(){t.disabled=f=!e[2],e[0]===void 0&&Be(()=>e[4].call(t)),m(o,"class","dropdown")},m(a,i){U(a,o,i),p(o,t);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(t,null);ke(t,e[0],!0),l||(_=[Ee(t,"change",e[4]),Ee(t,"change",e[5])],l=!0)},p(a,[i]){if(i&2){u=Te(a[1]);let d;for(d=0;d<u.length;d+=1){const E=He(a,u,d);s[d]?s[d].p(E,i):(s[d]=Le(E),s[d].c(),s[d].m(t,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=u.length}i&4&&f!==(f=!a[2])&&(t.disabled=f),i&3&&ke(t,a[0])},i:ye,o:ye,d(a){a&&g(o),qe(s,a),l=!1,Ae(_)}}}function Xe(e,o,t){let{options:f}=o,{selected_option:l=f[0]}=o,{enabled:_=!0}=o;f.join("_");const u=Fe();function s(){u("selection-changed",l)}function a(){l=Ke(this),t(0,l),t(1,f)}const i=()=>s();return e.$$set=d=>{"options"in d&&t(1,f=d.options),"selected_option"in d&&t(0,l=d.selected_option),"enabled"in d&&t(2,_=d.enabled)},[l,f,_,s,a,i]}class ve extends ze{constructor(o){super(),Pe(this,o,Xe,Ue,je,{options:1,selected_option:0,enabled:2})}}function Me(e){let o,t,f='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Data selection</button>',l,_,u,s,a,i,d="Year",E,w,T,I,F,j,C,N,X="Node",$,H,z,L,J,P,W,Q,re="Carrier",le,S,G,y,c;function h(n){e[19](n)}function r(n){e[20](n)}let k={enabled:!e[3]&&!e[2]};e[8]!==void 0&&(k.options=e[8]),e[9]!==void 0&&(k.selected_option=e[9]),w=new ve({props:k}),B.push(()=>A(w,"options",h)),B.push(()=>A(w,"selected_option",r)),w.$on("selection-changed",e[13]);function M(n){e[21](n)}function x(n){e[22](n)}let O={enabled:!e[3]&&!e[2]};e[4]!==void 0&&(O.options=e[4]),e[5]!==void 0&&(O.selected_option=e[5]),H=new ve({props:O}),B.push(()=>A(H,"options",M)),B.push(()=>A(H,"selected_option",x)),H.$on("selection-changed",e[13]);function ee(n){e[23](n)}function de(n){e[24](n)}let te={enabled:!e[3]&&!e[2]};return e[6]!==void 0&&(te.options=e[6]),e[7]!==void 0&&(te.selected_option=e[7]),S=new ve({props:te}),B.push(()=>A(S,"options",ee)),B.push(()=>A(S,"selected_option",de)),S.$on("selection-changed",e[13]),{c(){o=b("div"),t=b("h2"),t.innerHTML=f,l=K(),_=b("div"),u=b("div"),s=b("div"),a=b("div"),i=b("h3"),i.textContent=d,E=K(),ce(w.$$.fragment),F=K(),j=b("div"),C=b("div"),N=b("h3"),N.textContent=X,$=K(),ce(H.$$.fragment),J=K(),P=b("div"),W=b("div"),Q=b("h3"),Q.textContent=re,le=K(),ce(S.$$.fragment),this.h()},l(n){o=v(n,"DIV",{class:!0});var D=V(o);t=v(D,"H2",{class:!0,"data-svelte-h":!0}),ae(t)!=="svelte-1rnon8p"&&(t.innerHTML=f),l=R(D),_=v(D,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var se=V(_);u=v(se,"DIV",{class:!0});var Y=V(u);s=v(Y,"DIV",{class:!0});var ie=V(s);a=v(ie,"DIV",{class:!0});var pe=V(a);i=v(pe,"H3",{"data-svelte-h":!0}),ae(i)!=="svelte-r9e7qt"&&(i.textContent=d),E=R(pe),ue(w.$$.fragment,pe),pe.forEach(g),ie.forEach(g),F=R(Y),j=v(Y,"DIV",{class:!0});var me=V(j);C=v(me,"DIV",{class:!0});var ge=V(C);N=v(ge,"H3",{"data-svelte-h":!0}),ae(N)!=="svelte-ocjo5w"&&(N.textContent=X),$=R(ge),ue(H.$$.fragment,ge),ge.forEach(g),me.forEach(g),J=R(Y),P=v(Y,"DIV",{class:!0});var we=V(P);W=v(we,"DIV",{class:!0});var he=V(W);Q=v(he,"H3",{"data-svelte-h":!0}),ae(Q)!=="svelte-xc22hm"&&(Q.textContent=re),le=R(he),ue(S.$$.fragment,he),he.forEach(g),we.forEach(g),Y.forEach(g),se.forEach(g),D.forEach(g),this.h()},h(){m(t,"class","accordion-header"),m(a,"class","col-6"),m(s,"class","row"),m(C,"class","col-6"),m(j,"class","row"),m(W,"class","col-6"),m(P,"class","row"),m(u,"class","accordion-body"),m(_,"id","collapseTwo"),m(_,"class","accordion-collapse collapse"),m(_,"data-bs-parent","#accordionExample"),m(o,"class","accordion-item")},m(n,D){U(n,o,D),p(o,t),p(o,l),p(o,_),p(_,u),p(u,s),p(s,a),p(a,i),p(a,E),fe(w,a,null),p(u,F),p(u,j),p(j,C),p(C,N),p(C,$),fe(H,C,null),p(u,J),p(u,P),p(P,W),p(W,Q),p(W,le),fe(S,W,null),c=!0},p(n,D){const se={};D&12&&(se.enabled=!n[3]&&!n[2]),!T&&D&256&&(T=!0,se.options=n[8],q(()=>T=!1)),!I&&D&512&&(I=!0,se.selected_option=n[9],q(()=>I=!1)),w.$set(se);const Y={};D&12&&(Y.enabled=!n[3]&&!n[2]),!z&&D&16&&(z=!0,Y.options=n[4],q(()=>z=!1)),!L&&D&32&&(L=!0,Y.selected_option=n[5],q(()=>L=!1)),H.$set(Y);const ie={};D&12&&(ie.enabled=!n[3]&&!n[2]),!G&&D&64&&(G=!0,ie.options=n[6],q(()=>G=!1)),!y&&D&128&&(y=!0,ie.selected_option=n[7],q(()=>y=!1)),S.$set(ie)},i(n){c||(Z(w.$$.fragment,n),Z(H.$$.fragment,n),Z(S.$$.fragment,n),c=!0)},o(n){ne(w.$$.fragment,n),ne(H.$$.fragment,n),ne(S.$$.fragment,n),c=!1},d(n){n&&g(o),_e(w),_e(H),_e(S)}}}function Oe(e){let o,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){o=b("div"),o.innerHTML=t,this.h()},l(f){o=v(f,"DIV",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-57s7b4"&&(o.innerHTML=t),this.h()},h(){m(o,"class","text-center")},m(f,l){U(f,o,l)},d(f){f&&g(o)}}}function Se(e){let o,t,f,l,_;function u(i){e[25](i)}function s(i){e[26](i)}let a={zoom:!0};return e[11]!==void 0&&(a.config=e[11]),e[10]!==void 0&&(a.plot_name=e[10]),t=new Ye({props:a}),B.push(()=>A(t,"config",u)),B.push(()=>A(t,"plot_name",s)),{c(){o=b("div"),ce(t.$$.fragment),this.h()},l(i){o=v(i,"DIV",{style:!0});var d=V(o);ue(t.$$.fragment,d),d.forEach(g),this.h()},h(){be(o,"position","relative")},m(i,d){U(i,o,d),fe(t,o,null),_=!0},p(i,d){const E={};!f&&d&2048&&(f=!0,E.config=i[11],q(()=>f=!1)),!l&&d&1024&&(l=!0,E.plot_name=i[10],q(()=>l=!1)),t.$set(E)},i(i){_||(Z(t.$$.fragment,i),_=!0)},o(i){ne(t.$$.fragment,i),_=!1},d(i){i&&g(o),_e(t)}}}function $e(e){let o,t='<div class="col"><h2>The Energy Balance</h2></div>',f,l,_,u,s,a,i,d='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',E,w,T,I,F,j,C,N,X,$,H,z,L,J,P;function W(r){e[14](r)}function Q(r){e[15](r)}function re(r){e[16](r)}function le(r){e[17](r)}function S(r){e[18](r)}let G={enabled:!e[2]&&!e[3]};e[6]!==void 0&&(G.carriers=e[6]),e[4]!==void 0&&(G.nodes=e[4]),e[8]!==void 0&&(G.years=e[8]),e[0]!==void 0&&(G.selected_solution=e[0]),e[2]!==void 0&&(G.loading=e[2]),I=new Re({props:G}),B.push(()=>A(I,"carriers",W)),B.push(()=>A(I,"nodes",Q)),B.push(()=>A(I,"years",re)),B.push(()=>A(I,"selected_solution",le)),B.push(()=>A(I,"loading",S)),I.$on("solution_selected",e[12]);let y=!e[2]&&e[0]&&Me(e),c=e[3]&&Oe(),h=!e[3]&&e[1]&&Se(e);return{c(){o=b("div"),o.innerHTML=t,f=K(),l=b("div"),_=b("div"),u=b("div"),s=b("div"),a=b("div"),i=b("h2"),i.innerHTML=d,E=K(),w=b("div"),T=b("div"),ce(I.$$.fragment),$=K(),y&&y.c(),H=K(),z=b("div"),L=b("div"),c&&c.c(),J=K(),h&&h.c(),this.h()},l(r){o=v(r,"DIV",{class:!0,"data-svelte-h":!0}),ae(o)!=="svelte-1d6fcfp"&&(o.innerHTML=t),f=R(r),l=v(r,"DIV",{class:!0});var k=V(l);_=v(k,"DIV",{class:!0});var M=V(_);u=v(M,"DIV",{class:!0,style:!0});var x=V(u);s=v(x,"DIV",{class:!0,id:!0});var O=V(s);a=v(O,"DIV",{class:!0});var ee=V(a);i=v(ee,"H2",{class:!0,"data-svelte-h":!0}),ae(i)!=="svelte-1oln34a"&&(i.innerHTML=d),E=R(ee),w=v(ee,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var de=V(w);T=v(de,"DIV",{class:!0});var te=V(T);ue(I.$$.fragment,te),te.forEach(g),de.forEach(g),ee.forEach(g),$=R(O),y&&y.l(O),O.forEach(g),x.forEach(g),M.forEach(g),k.forEach(g),H=R(r),z=v(r,"DIV",{class:!0});var n=V(z);L=v(n,"DIV",{class:!0,style:!0});var D=V(L);c&&c.l(D),J=R(D),h&&h.l(D),D.forEach(g),n.forEach(g),this.h()},h(){m(o,"class","row"),m(i,"class","accordion-header"),m(T,"class","accordion-body"),m(w,"id","collapseOne"),m(w,"class","accordion-collapse collapse show"),m(w,"data-bs-parent","#accordionExample"),m(a,"class","accordion-item solution-selection"),m(s,"class","accordion"),m(s,"id","accordionExample"),m(u,"class","filters"),be(u,"position","absolute"),be(u,"width","100%"),m(_,"class","col position-relative"),m(l,"class","row"),m(L,"class","col"),be(L,"margin-top","400px"),m(z,"class","row")},m(r,k){U(r,o,k),U(r,f,k),U(r,l,k),p(l,_),p(_,u),p(u,s),p(s,a),p(a,i),p(a,E),p(a,w),p(w,T),fe(I,T,null),p(s,$),y&&y.m(s,null),U(r,H,k),U(r,z,k),p(z,L),c&&c.m(L,null),p(L,J),h&&h.m(L,null),P=!0},p(r,[k]){const M={};k&12&&(M.enabled=!r[2]&&!r[3]),!F&&k&64&&(F=!0,M.carriers=r[6],q(()=>F=!1)),!j&&k&16&&(j=!0,M.nodes=r[4],q(()=>j=!1)),!C&&k&256&&(C=!0,M.years=r[8],q(()=>C=!1)),!N&&k&1&&(N=!0,M.selected_solution=r[0],q(()=>N=!1)),!X&&k&4&&(X=!0,M.loading=r[2],q(()=>X=!1)),I.$set(M),!r[2]&&r[0]?y?(y.p(r,k),k&5&&Z(y,1)):(y=Me(r),y.c(),Z(y,1),y.m(s,null)):y&&(Ve(),ne(y,1,1,()=>{y=null}),Ie()),r[3]?c||(c=Oe(),c.c(),c.m(L,J)):c&&(c.d(1),c=null),!r[3]&&r[1]?h?(h.p(r,k),k&10&&Z(h,1)):(h=Se(r),h.c(),Z(h,1),h.m(L,null)):h&&(Ve(),ne(h,1,1,()=>{h=null}),Ie())},i(r){P||(Z(I.$$.fragment,r),Z(y),Z(h),P=!0)},o(r){ne(I.$$.fragment,r),ne(y),ne(h),P=!1},d(r){r&&(g(o),g(f),g(l),g(H),g(z)),_e(I),y&&y.d(),c&&c.d(),h&&h.d()}}}function xe(e,o,t){var f=["rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 99, 132)","rgb(201, 203, 207)","rgb(220,20,60)","rgb(255,99,71)","rgb(255,69,0)","rgb(154,205,50)","rgb(0,100,0)","rgb(50,205,50)","rgb(0,139,139)","rgb(153,50,204)","rgb(255,105,180)"];let l=null,_=!1,u=!1,s=!1,a=[],i=null,d=[],E=null,w=[],T=null,I="",F="";const j={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};let C=structuredClone(j);async function N(){l&&(t(11,C=structuredClone(j)),t(5,i=a[0]),t(7,E=d[0]),t(9,T=w[0]),t(1,_=!1),await X())}async function X(){if(t(3,s=!0),Ce(),i==null||E==null||T==null||l==null){t(3,s=!1);return}let c=Math.floor((T-l.detail.system.reference_year)/l.detail.system.interval_between_years),h=await Ze(l.solution_name,i,E,l.scenario_name,c),r=await Je(l.solution_name,oe("flow_export",l.version),l.scenario_name);r===null?I="":I=r.data[0][0];let k=[],M=0;for(const O in h){let ee={node:[i]};if(h[O]==null||h[O].data.length==0)continue;if("technology"in h[O].data[0]){let n=[];for(const D of h[O].data)n.push(D.technology);ee={technology:n}}let de={},te=Qe(h[O].data,ee,de);if(te.length!=0)for(let n of te){if(Object.keys(n.data).length==0)continue;switch(O){case oe("flow_storage_discharge",l.version):n.label=n.label+" (discharge)";break;case oe("flow_transport_in",l.version):n.label=n.label+" (transport in)";break;case oe("flow_import",l.version):n.label="Import",l.version;break;case oe("shed_demand",l.version):n.label="Shed Demand";break;case oe("flow_storage_charge",l.version):n.label=n.label+" (charge)";break;case oe("flow_transport_out",l.version):n.label=n.label+" (transport out)";break;case oe("flow_export",l.version):n.label="Export";break}let D="line";Object.keys(n.data).length==1&&(D="bar"),O=="demand"?(n.label="Demand",n.type="line",n.stack="ownCustomStack",n.fill=!1,n.borderColor="black",n.backgroundColor="white",n.borderWidth=2,n.stepped=!0,Object.keys(n.data).length==1&&(n.pointRadius=2)):(n.type=D,n.fill="origin",n.borderColor=f[M%f.length],n.backgroundColor=f[M%f.length].replace(")",", 1)"),n.stepped=!0,n.cubicInterpolationMode="monotone"),k.push(n),M++}}t(11,C.data.labels=Object.keys(k[0].data),C),t(11,C.data.datasets=k,C),t(11,C.options.scales.y.title.text="Power ["+I+"]",C),t(3,s=!1),t(1,_=!0),await Ce();let x=l.solution_name.split(".");t(10,F=[x[(x==null?void 0:x.length)-1],l==null?void 0:l.scenario_name,"balance",E,i,T].join("_"))}function $(c){d=c,t(6,d)}function H(c){a=c,t(4,a)}function z(c){w=c,t(8,w)}function L(c){l=c,t(0,l)}function J(c){u=c,t(2,u)}function P(c){w=c,t(8,w)}function W(c){T=c,t(9,T)}function Q(c){a=c,t(4,a)}function re(c){i=c,t(5,i)}function le(c){d=c,t(6,d)}function S(c){E=c,t(7,E)}function G(c){C=c,t(11,C)}function y(c){F=c,t(10,F)}return[l,_,u,s,a,i,d,E,w,T,F,C,N,X,$,H,z,L,J,P,W,Q,re,le,S,G,y]}class st extends ze{constructor(o){super(),Pe(this,o,xe,$e,je,{})}}export{st as component};
