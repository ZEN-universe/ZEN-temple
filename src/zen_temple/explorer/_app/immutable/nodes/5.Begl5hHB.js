import{s as Ae,r as X,e as w,a as Y,c as k,m as G,g as Z,b as P,f as p,o as v,w as we,i as T,h as E,v as $,y as ke,t as be,d as me,z as qe,A as Ce,B as ye,j as Le,C as Be,D as Pe,E as De,F as We,n as O}from"../chunks/scheduler.CM3yWj5-.js";import{S as Fe,i as Ke,b as x,c as ie,d as ae,m as re,t as W,a as R,e as _e,f as ce,g as pe}from"../chunks/index.Ben0jr7p.js";import{e as Ee}from"../chunks/each.D6YF6ztN.js";import{S as Ye,f as Ze,B as Ge,b as Je}from"../chunks/utils.CB6KrYor.js";import{A as Qe}from"../chunks/AllCheckbox.CidvCSCk.js";import{D as Ie}from"../chunks/Dropdown.7e0V7e_D.js";import{g as Re}from"../chunks/variables.CqS7hfz2.js";import{T as Ue}from"../chunks/ToggleButton.q46riUHC.js";function Ve(l,e,t){const o=l.slice();return o[43]=e[t],o}function Te(l){let e,t,o='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button>',s,d,r,g,i,C,f=l[2].length>0&&He(l),b=l[0]&&l[6]&&l[4].length>0&&l[3].length>0&&Me(l);return{c(){e=w("div"),t=w("h2"),t.innerHTML=o,s=Y(),d=w("div"),r=w("div"),f&&f.c(),g=Y(),b&&b.c(),i=ke(),this.h()},l(a){e=k(a,"DIV",{class:!0});var u=P(e);t=k(u,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-18ejqb9"&&(t.innerHTML=o),s=Z(u),d=k(u,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var I=P(d);r=k(I,"DIV",{class:!0});var L=P(r);f&&f.l(L),L.forEach(p),I.forEach(p),u.forEach(p),g=Z(a),b&&b.l(a),i=ke(),this.h()},h(){v(t,"class","accordion-header"),v(r,"class","accordion-body"),v(d,"id","collapseTwo"),v(d,"class","accordion-collapse collapse"),v(d,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item variable-selction")},m(a,u){T(a,e,u),E(e,t),E(e,s),E(e,d),E(d,r),f&&f.m(r,null),T(a,g,u),b&&b.m(a,u),T(a,i,u),C=!0},p(a,u){a[2].length>0?f?(f.p(a,u),u[0]&4&&W(f,1)):(f=He(a),f.c(),W(f,1),f.m(r,null)):f&&(pe(),R(f,1,1,()=>{f=null}),_e()),a[0]&&a[6]&&a[4].length>0&&a[3].length>0?b?(b.p(a,u),u[0]&89&&W(b,1)):(b=Me(a),b.c(),W(b,1),b.m(i.parentNode,i)):b&&(pe(),R(b,1,1,()=>{b=null}),_e())},i(a){C||(W(f),W(b),C=!0)},o(a){R(f),R(b),C=!1},d(a){a&&(p(e),p(g),p(i)),f&&f.d(),b&&b.d(a)}}}function He(l){let e,t="Carrier",o,s,d,r=(l[9]||l[8])+"",g,i,C,f,b="Year",a,u,I,L,F,j,H="Smoothing Window Size",A,V,N,D,S,U,te,J=Ee(l[2]),_=[];for(let n=0;n<J.length;n+=1)_[n]=Se(Ve(l,J,n));function q(n){l[25](n)}function y(n){l[26](n)}let M={enabled:!l[9]&&!l[8]};l[12]!==void 0&&(M.options=l[12]),l[13]!==void 0&&(M.selected_option=l[13]),u=new Ie({props:M}),X.push(()=>x(u,"options",q)),X.push(()=>x(u,"selected_option",y)),u.$on("selection-changed",l[18]);function Q(n){l[27](n)}function oe(n){l[28](n)}let c={enabled:!l[9]&&!l[8]};return l[14]!==void 0&&(c.options=l[14]),l[15]!==void 0&&(c.selected_option=l[15]),V=new Ie({props:c}),X.push(()=>x(V,"options",Q)),X.push(()=>x(V,"selected_option",oe)),V.$on("selection-changed",l[18]),{c(){e=w("h3"),e.textContent=t,o=Y(),s=w("select");for(let n=0;n<_.length;n+=1)_[n].c();d=be(`
                                        disabled=`),g=be(r),C=Y(),f=w("h3"),f.textContent=b,a=Y(),ie(u.$$.fragment),F=Y(),j=w("h3"),j.textContent=H,A=Y(),ie(V.$$.fragment),this.h()},l(n){e=k(n,"H3",{"data-svelte-h":!0}),G(e)!=="svelte-xc22hm"&&(e.textContent=t),o=Z(n),s=k(n,"SELECT",{});var h=P(s);for(let z=0;z<_.length;z+=1)_[z].l(h);d=me(h,`
                                        disabled=`),g=me(h,r),h.forEach(p),C=Z(n),f=k(n,"H3",{"data-svelte-h":!0}),G(f)!=="svelte-r9e7qt"&&(f.textContent=b),a=Z(n),ae(u.$$.fragment,n),F=Z(n),j=k(n,"H3",{"data-svelte-h":!0}),G(j)!=="svelte-ec8yqb"&&(j.textContent=H),A=Z(n),ae(V.$$.fragment,n),this.h()},h(){s.disabled=i=l[9]||l[8],l[6]===void 0&&qe(()=>l[24].call(s))},m(n,h){T(n,e,h),T(n,o,h),T(n,s,h);for(let z=0;z<_.length;z+=1)_[z]&&_[z].m(s,null);E(s,d),E(s,g),Ce(s,l[6],!0),T(n,C,h),T(n,f,h),T(n,a,h),re(u,n,h),T(n,F,h),T(n,j,h),T(n,A,h),re(V,n,h),S=!0,U||(te=[ye(s,"change",l[24]),ye(s,"change",l[18])],U=!0)},p(n,h){if(h[0]&4){J=Ee(n[2]);let B;for(B=0;B<J.length;B+=1){const ne=Ve(n,J,B);_[B]?_[B].p(ne,h):(_[B]=Se(ne),_[B].c(),_[B].m(s,d))}for(;B<_.length;B+=1)_[B].d(1);_.length=J.length}(!S||h[0]&768)&&r!==(r=(n[9]||n[8])+"")&&Le(g,r),(!S||h[0]&768&&i!==(i=n[9]||n[8]))&&(s.disabled=i),h[0]&68&&Ce(s,n[6]);const z={};h[0]&768&&(z.enabled=!n[9]&&!n[8]),!I&&h[0]&4096&&(I=!0,z.options=n[12],$(()=>I=!1)),!L&&h[0]&8192&&(L=!0,z.selected_option=n[13],$(()=>L=!1)),u.$set(z);const ee={};h[0]&768&&(ee.enabled=!n[9]&&!n[8]),!N&&h[0]&16384&&(N=!0,ee.options=n[14],$(()=>N=!1)),!D&&h[0]&32768&&(D=!0,ee.selected_option=n[15],$(()=>D=!1)),V.$set(ee)},i(n){S||(W(u.$$.fragment,n),W(V.$$.fragment,n),S=!0)},o(n){R(u.$$.fragment,n),R(V.$$.fragment,n),S=!1},d(n){n&&(p(e),p(o),p(s),p(C),p(f),p(a),p(F),p(j),p(A)),Be(_,n),ce(u,n),ce(V,n),U=!1,Pe(te)}}}function Se(l){let e,t=l[43]+"",o,s;return{c(){e=w("option"),o=be(t),this.h()},l(d){e=k(d,"OPTION",{});var r=P(e);o=me(r,t),r.forEach(p),this.h()},h(){e.__value=s=l[43],De(e,e.__value)},m(d,r){T(d,e,r),E(e,o)},p(d,r){r[0]&4&&t!==(t=d[43]+"")&&Le(o,t),r[0]&4&&s!==(s=d[43])&&(e.__value=s,De(e,e.__value))},d(d){d&&p(e)}}}function Me(l){let e,t,o='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button>',s,d,r,g,i,C,f="Technology Subdivision",b,a,u,I,L,F="Node",j,H,A,V,N;function D(_){l[29](_)}let S={};l[11]!==void 0&&(S.value=l[11]),a=new Ue({props:S}),X.push(()=>x(a,"value",D)),a.$on("change",l[19]);function U(_){l[30](_)}function te(_){l[31](_)}let J={};return l[7]!==void 0&&(J.selected_elements=l[7]),l[3]!==void 0&&(J.elements=l[3]),H=new Qe({props:J}),X.push(()=>x(H,"selected_elements",U)),X.push(()=>x(H,"elements",te)),H.$on("selection-changed",l[19]),{c(){e=w("div"),t=w("h2"),t.innerHTML=o,s=Y(),d=w("div"),r=w("div"),g=w("div"),i=Y(),C=w("h3"),C.textContent=f,b=Y(),ie(a.$$.fragment),I=Y(),L=w("h3"),L.textContent=F,j=Y(),ie(H.$$.fragment),this.h()},l(_){e=k(_,"DIV",{class:!0});var q=P(e);t=k(q,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1btd1mx"&&(t.innerHTML=o),s=Z(q),d=k(q,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var y=P(d);r=k(y,"DIV",{class:!0});var M=P(r);g=k(M,"DIV",{class:!0}),P(g).forEach(p),i=Z(M),C=k(M,"H3",{"data-svelte-h":!0}),G(C)!=="svelte-q2zoen"&&(C.textContent=f),b=Z(M),ae(a.$$.fragment,M),I=Z(M),L=k(M,"H3",{"data-svelte-h":!0}),G(L)!=="svelte-ocjo5w"&&(L.textContent=F),j=Z(M),ae(H.$$.fragment,M),M.forEach(p),y.forEach(p),q.forEach(p),this.h()},h(){v(t,"class","accordion-header"),v(g,"class","row"),v(r,"class","accordion-body"),v(d,"id","collapseThree"),v(d,"class","accordion-collapse collapse"),v(d,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item")},m(_,q){T(_,e,q),E(e,t),E(e,s),E(e,d),E(d,r),E(r,g),E(r,i),E(r,C),E(r,b),re(a,r,null),E(r,I),E(r,L),E(r,j),re(H,r,null),N=!0},p(_,q){const y={};!u&&q[0]&2048&&(u=!0,y.value=_[11],$(()=>u=!1)),a.$set(y);const M={};!A&&q[0]&128&&(A=!0,M.selected_elements=_[7],$(()=>A=!1)),!V&&q[0]&8&&(V=!0,M.elements=_[3],$(()=>V=!1)),H.$set(M)},i(_){N||(W(a.$$.fragment,_),W(H.$$.fragment,_),N=!0)},o(_){R(a.$$.fragment,_),R(H.$$.fragment,_),N=!1},d(_){_&&p(e),ce(a),ce(H)}}}function Xe(l){let e,t,o,s;function d(i){l[32](i)}function r(i){l[33](i)}let g={zoom:!0};return l[16]!==void 0&&(g.config=l[16]),l[10]!==void 0&&(g.plot_name=l[10]),e=new Ge({props:g}),X.push(()=>x(e,"config",d)),X.push(()=>x(e,"plot_name",r)),{c(){ie(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,C){re(e,i,C),s=!0},p(i,C){const f={};!t&&C[0]&65536&&(t=!0,f.config=i[16],$(()=>t=!1)),!o&&C[0]&1024&&(o=!0,f.plot_name=i[10],$(()=>o=!1)),e.$set(f)},i(i){s||(W(e.$$.fragment,i),s=!0)},o(i){R(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function $e(l){let e,t="No data with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function xe(l){let e,t="No locations with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-tr8mx7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function et(l){let e,t="No data with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function tt(l){let e,t="No solution selected.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-17x0k81"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function lt(l){let e,t="No carriers with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1wht3n0"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function nt(l){let e,t="No technologies with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1ontq7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function ot(l){let e,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-57s7b4"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function st(l){let e,t='<div class="col"><h2>The Energy Balance Storage</h2></div>',o,s,d,r,g,i,C,f='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',b,a,u,I,L,F,j,H,A,V,N,D,S,U;function te(c){l[20](c)}function J(c){l[21](c)}function _(c){l[22](c)}let q={enabled:!l[9]&&!l[8]};l[5]!==void 0&&(q.selected_solution=l[5]),l[8]!==void 0&&(q.loading=l[8]),l[12]!==void 0&&(q.years=l[12]),I=new Ye({props:q}),X.push(()=>x(I,"selected_solution",te)),X.push(()=>x(I,"loading",J)),X.push(()=>x(I,"years",_)),I.$on("solution_selected",l[23]);let y=!l[8]&&l[5]&&Te(l);const M=[ot,nt,lt,tt,et,xe,$e,Xe],Q=[];function oe(c,n){return c[8]||c[9]?0:c[4].length==0?1:c[2].length==0?2:c[5]==null?3:c[1]==null?4:c[3].length==0?5:c[1].length==0?6:7}return D=oe(l),S=Q[D]=M[D](l),{c(){e=w("div"),e.innerHTML=t,o=Y(),s=w("div"),d=w("div"),r=w("div"),g=w("div"),i=w("div"),C=w("h2"),C.innerHTML=f,b=Y(),a=w("div"),u=w("div"),ie(I.$$.fragment),H=Y(),y&&y.c(),A=Y(),V=w("div"),N=w("div"),S.c(),this.h()},l(c){e=k(c,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-wp6wh4"&&(e.innerHTML=t),o=Z(c),s=k(c,"DIV",{class:!0,style:!0});var n=P(s);d=k(n,"DIV",{class:!0});var h=P(d);r=k(h,"DIV",{class:!0});var z=P(r);g=k(z,"DIV",{class:!0,id:!0});var ee=P(g);i=k(ee,"DIV",{class:!0});var B=P(i);C=k(B,"H2",{class:!0,"data-svelte-h":!0}),G(C)!=="svelte-1oln34a"&&(C.innerHTML=f),b=Z(B),a=k(B,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var ne=P(a);u=k(ne,"DIV",{class:!0});var de=P(u);ae(I.$$.fragment,de),de.forEach(p),ne.forEach(p),B.forEach(p),H=Z(ee),y&&y.l(ee),ee.forEach(p),z.forEach(p),h.forEach(p),n.forEach(p),A=Z(c),V=k(c,"DIV",{class:!0});var ue=P(V);N=k(ue,"DIV",{class:!0});var fe=P(N);S.l(fe),fe.forEach(p),ue.forEach(p),this.h()},h(){v(e,"class","row"),v(C,"class","accordion-header"),v(u,"class","accordion-body"),v(a,"id","collapseOne"),v(a,"class","accordion-collapse collapse show"),v(a,"data-bs-parent","#accordionExample"),v(i,"class","accordion-item solution-selection"),v(g,"class","accordion"),v(g,"id","accordionExample"),v(r,"class","filters"),v(d,"class","col position-relative"),v(s,"class","row"),we(s,"z-index","1"),we(s,"position","relative"),v(N,"class","row mt-4"),v(V,"class","col")},m(c,n){T(c,e,n),T(c,o,n),T(c,s,n),E(s,d),E(d,r),E(r,g),E(g,i),E(i,C),E(i,b),E(i,a),E(a,u),re(I,u,null),E(g,H),y&&y.m(g,null),T(c,A,n),T(c,V,n),E(V,N),Q[D].m(N,null),U=!0},p(c,n){const h={};n[0]&768&&(h.enabled=!c[9]&&!c[8]),!L&&n[0]&32&&(L=!0,h.selected_solution=c[5],$(()=>L=!1)),!F&&n[0]&256&&(F=!0,h.loading=c[8],$(()=>F=!1)),!j&&n[0]&4096&&(j=!0,h.years=c[12],$(()=>j=!1)),I.$set(h),!c[8]&&c[5]?y?(y.p(c,n),n[0]&288&&W(y,1)):(y=Te(c),y.c(),W(y,1),y.m(g,null)):y&&(pe(),R(y,1,1,()=>{y=null}),_e());let z=D;D=oe(c),D===z?Q[D].p(c,n):(pe(),R(Q[z],1,1,()=>{Q[z]=null}),_e(),S=Q[D],S?S.p(c,n):(S=Q[D]=M[D](c),S.c()),W(S,1),S.m(N,null))},i(c){U||(W(I.$$.fragment,c),W(y),W(S),U=!0)},o(c){R(I.$$.fragment,c),R(y),R(S),U=!1},d(c){c&&(p(e),p(o),p(s),p(A),p(V)),ce(I),y&&y.d(),Q[D].d()}}}let ge="storage_level";function it(l,e,t){let o=null,s=null,d=[],r=[],g=[],i=null,C=null,f=null,b="technology",a=[],u=[],I=!1,L=!1,F="",j=!0,H=[],A=0,V=["Hourly","Daily","Weekly","Monthly"],N="Hourly",D={counter:1,type:"line",data:{datasets:[],labels:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};function S(){t(7,u=r),a=g,b="node"}async function U(){if(t(0,o=null),i===null)return;let m=Math.floor((A-i.detail.system.reference_year)/i.detail.system.interval_between_years),K=1;switch(N){case"Daily":K=24;break;case"Weekly":K=168;break;case"Monthly":K=720;break}let le=await Je(i.solution_name,Re(ge),i.scenario_name,m,K);t(0,o=le.data),C=le.unit}async function te(){i!==null&&(t(9,L=!0),t(13,A=H[0]),await U(),y(),M(),_(),S(),Q(),t(9,L=!1))}async function J(){t(9,L=!0),await U(),M(),_(),S(),Q(),t(9,L=!1)}function _(){t(3,r=Array.from(new Set(o.data.map(m=>m.node)))),t(7,u=r)}function q(){try{return C.data[0][0]}catch{return""}}function y(){if(t(2,d=[]),!o)return;let m=Array.from(o.data.map(K=>K.technology));o.data.forEach(K=>{let le=K.technology,se=i.detail.reference_carrier[le];!d.includes(se)&&m.includes(K.technology)&&d.push(se)}),d.length>0&&t(6,f=d[0])}function M(){let m=Array.from(new Set(o.data.map(K=>K.technology)));t(4,g=m.filter(K=>(i==null?void 0:i.detail.reference_carrier[K])==f)),a=g}function Q(){if(b=="technology"?t(7,u=r):a=g,u.length==0||a.length==0||o===null){t(1,s=null);return}let m={},K={};if(m.technology=a,K.node=u,t(1,s=Ze(o.data,m,K,[],!1,"line")),t(16,D.data={datasets:s,labels:Object.keys(s[0].data)},D),!j){let se={};for(const ve in s[0].data)se[ve]=s.map(he=>he.data[ve]).reduce((he,je)=>he+je,0);t(1,s=[{data:Object.values(se),label:"Storage level",type:"line",borderColor:"black"}]),t(16,D.data={datasets:s,labels:Object.keys(se)},D)}t(16,D.options.scales.y.title.text=ge+" ["+q()+"]",D);let le=i.solution_name.split(".");t(10,F=[le[(le==null?void 0:le.length)-1],i==null?void 0:i.scenario_name,ge,f].join("_"))}function oe(m){i=m,t(5,i)}function c(m){I=m,t(8,I)}function n(m){H=m,t(12,H)}const h=()=>{te()};function z(){f=We(this),t(6,f),t(2,d)}function ee(m){H=m,t(12,H)}function B(m){A=m,t(13,A)}function ne(m){V=m,t(14,V)}function de(m){N=m,t(15,N)}function ue(m){j=m,t(11,j)}function fe(m){u=m,t(7,u)}function ze(m){r=m,t(3,r)}function Ne(m){D=m,t(16,D)}function Oe(m){F=m,t(10,F)}return[o,s,d,r,g,i,f,u,I,L,F,j,H,A,V,N,D,te,J,Q,oe,c,n,h,z,ee,B,ne,de,ue,fe,ze,Ne,Oe]}class ht extends Fe{constructor(e){super(),Ke(this,e,it,st,Ae,{},null,[-1,-1])}}export{ht as component};
